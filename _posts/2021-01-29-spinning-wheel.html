---
layout: post
title: Spinner
---
<head>
    <link rel="stylesheet" href="/public/css/spinner.css">
</head>

<body>
    <blockquote> I was looking to practice animating HTML elements with javascript and CSS and thought this was a good little project that used an elegant solution to rotating and colouring the 8 individual sectors of the wheel. </blockquote>
    <h2> Instructions </h2>
    <ul>
        <li> Probably don't need to spell out that you press the button in the middle to <strong> spin </strong> the wheel. </li>
        <li> And heres a button to <button class="inline-button name-generator" onclick="set_names()"> Set Random Names </button> </li>
    </ul>
     

    <div id="mainbox" class="mainbox">
        <div id="box" class="box">
            <div class="oranges">
                <span class="slice orange-slice up"><p class="name"> </p></span>
                <span class="slice orange-slice right"><p class="name"> </p></span>
                <span class="slice orange-slice down"><p class="name"> </p></span>
                <span class="slice orange-slice left"><p class="name"> </p></span>
            </div>
            <div class="yellows">
                <span class="slice yellow-slice up"><p class="name"> </p></span>
                <span class="slice yellow-slice right"><p class="name"> </p></span>
                <span class="slice yellow-slice down"><p class="name"> </p></span>
                <span class="slice yellow-slice left"><p class="name"> </p></span>
            </div>
        </div>
        <button class="spin" onclick="spin_spinner()">SPIN</button>
    </div>

    <h1> Code Overview </h1>
    <div>
For a wheel with 8 sectors, we want to create our slices from triangles with one interior angle of \( \frac{360}{8} = 45° \). With some simple trigenometry we get the following <code>clip-path</code>s, though the angle doesn't need to be exact using trig provides a simple way to extend this to wheels with more or less sectors.
{% highlight css %}
{% raw %}
.orange-slice {
    clip-path: polygon(50% 100%, 92% 0, 8% 0);
    background-color: #FF5733;
}
.yellow-slice {
    clip-path: polygon(50% 100%, 92% 0, 8% 0);
    background-color: #FFC300;
}
{% endraw %}
{% endhighlight %}
I then add 4 of each of the coloured sectors with classes corresponding to their colour and direction. This would have to be done programatically to most easily vary the amount of pieces.
{% highlight HTML %}
<div class="oranges">
    <span class="slice orange-slice up"><p class="name"> </p></span>
    <span class="slice orange-slice right"><p class="name"> </p></span>
    <span class="slice orange-slice down"><p class="name"> </p></span>
    <span class="slice orange-slice left"><p class="name"> </p></span>
</div>
<div class="yellows">
    <span class="slice yellow-slice up"><p class="name"> </p></span>
    <span class="slice yellow-slice right"><p class="name"> </p></span>
    <span class="slice yellow-slice down"><p class="name"> </p></span>
    <span class="slice yellow-slice left"><p class="name"> </p></span>
</div>
{% endhighlight %}
Then the HTML classes encoded with the direction can be used to control the position and rotation. We use percentages for mobile responsiveness.
{% highlight css %}
{% raw %}
.up {
    top: 0px;
    left: 25%;
}
.right {
    top: 25%;
    right: 0;
    transform: rotate(90deg);
}
.down {
    bottom: 0;
    left: 25%;
    transform: rotate(180deg);
}
.left {
    top: 25%;
    left: 0;
    transform: rotate(270deg);
}
{% endraw %}
{% endhighlight %}
and the <code>yellows</code> div gets rotated an extra 45° clockwise to correctly offset the segments from the oranges.
{% highlight css %}
{% raw %}
.yellows{
    width: 100%;
    height: 100%;
    transform: rotate(45deg);
}
{% endraw %}
{% endhighlight %}
To do the spinning we just pick a large random angle, rotate the box containing the spinner with css, and toggle the animation property.
{% highlight javascript %}
{% raw %}
function spin_spinner() {
    var min_deg = 4000;
    var max_deg = 10000;

    angle_change = (Math.floor(Math.random() * (max_deg - min_deg)) + min_deg) * 
                   (Math.round(Math.random()) * 2 - 1);  // random direction
    current_angle = current_angle + angle_change;

    document.getElementById('box').style.transform = "rotate("+current_angle+"deg)";

    var element = document.getElementById('mainbox');
    element.classList.remove('animate');
    setTimeout(function(){
        element.classList.add('animate');
    }, 5000);
}
{% endraw %}
{% endhighlight %}
If you're interested in more of the code feel free to inspect the page, I included the javascript directly so you can easily use, modify, and extend the element for your own purposes.
    </div>


<script>
var NAMES = ["Liam", "Noah", "Oliver", "Steve", "Elijah", "James", "Benjamin", "Lucas", "Mason", "Ethan", "Alexander", "Henry", "Jacob", "Michael", "Daniel", "Logan", "Jackson", "Sebastian", "Jack", "Aiden", "Olivia", "Emma", "Ava", "Sophia", "Isabella", "Charlotte", "Amelia", "Kerry", "Harper", "Evelyn", "Abigail", "Emily", "Ella", "Elizabeth", "Natalie", "Luna", "Sofia", "Avery", "Mila", "Aria"]
var current_angle = 0;

function set_names() {
    var spinner_names = document.getElementsByClassName("name");

    var current_name;
    for (var i = 0; i < spinner_names.length; i++) {
        current_name = NAMES[Math.floor(Math.random() * NAMES.length)];
        spinner_names[i].innerHTML = current_name;
    }
}

function spin_spinner() {
    var min_deg = 4000;
    var max_deg = 10000;

    angle_change = (Math.floor(Math.random() * (max_deg - min_deg)) + min_deg) * 
                   (Math.round(Math.random()) * 2 - 1);  // random direction
    current_angle = current_angle + angle_change;

    document.getElementById('box').style.transform = "rotate("+current_angle+"deg)";

    var element = document.getElementById('mainbox');
    element.classList.remove('animate');
    setTimeout(function(){
        element.classList.add('animate');
    }, 5000);  // 5 seconds
}

set_names()
</script>
</body>
</html>