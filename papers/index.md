---
layout: page
title: papers
---

<strong>published</strong>:

<a href="http://www.cesop.unicamp.br/site/htm/arquivo_artigo_revista.php?art=390">A dimensão geográfica das eleições brasileiras</a> (“The spatial dimension of Brazilian elections”). Opinião Pública (Public Opinion), 19(2), 270-290, 2013. Here I use spatial econometrics and the Brazilian election of 2010 to understand why neighboring counties tend to vote similarly. <u>Data and code</u>. I used a mix of Stata (<a href="https://gist.github.com/thiagomarzagao/0542e82973ea86d78a03">here</a>) and R (<a href="https://gist.github.com/thiagomarzagao/fd1d86ec744b6d6430c3">here</a>) code. The dataset is <a href="https://s3.amazonaws.com/thiagomarzagao/Brazil2010election.dta">here</a> (it's in Stata format; convert it to CSV format to run the R code). The list of missing observations is <a href="https://s3.amazonaws.com/thiagomarzagao/missingdata.xlsx">here</a>. (To produce the plots I used GeoDa and ArcGIS, using the respective GUIs, so there's no code for those.)

<a href="http://www.scielo.br/pdf/rbe/v62n3/a02v62n3.pdf">Lobby e protecionismo no Brasil contemporâneo</a> (“Lobby and protectionism in Brazil”). Revista Brasileira de Economia (Brazilian Review of Economics), 62(3), 263-178, 2008. Here I regress tariffs on industry-level indicators of political power (economic concentration, number of workers, etc). <u>Data and code</u>. I ran everything almost a decade ago and back then I used Excel spreadsheets to store data (<a href="http://lemire.me/blog/archives/2014/05/23/you-shouldnt-use-a-spreadsheet-for-important-work-i-mean-it/">I know, I know...</a>) and I clicked buttons instead of writing code (I didn't know any better), so I don't have much to offer here. The spreadsheets are all in <a href="https://s3.amazonaws.com/thiagomarzagao/REPLICATION+MATERIAL.zip">this zipped folder</a>.

<strong>still in progress</strong>:

[Using SVM to pre-classify government expenditures](https://s3.amazonaws.com/thiagomarzagao/classifyingProcurement.pdf). Here I use support vector machines (SVM) to create an app that could reduce misclassification of government purchases in Brazil. The app suggests likely categories based on the description of the good being purchased. <u>Data and code</u>. Download and decompress the [CSV files](https://s3.amazonaws.com/thiagomarzagao/catmat.tar.gz) and save them all in the same folder. Then use the scripts [parseX.py](https://gist.github.com/thiagomarzagao/54a1f8eb31d99be23972) and [parseY.py](https://gist.github.com/thiagomarzagao/64c264f969112193d7fa) to create X.pkl and Y.pkl respectively (I know, I could simply let you download X.pkl and Y.pkl directly but you should not trust Python pickles you didn't create yourself. And the pickles take up a lot more space than the CSVs.) Then use the [catmat_svm.py](https://gist.github.com/thiagomarzagao/6fb7928988cf1fd8e159) script to train and validate the classifier. As for the web app, it's [open source](https://github.com/thiagomarzagao/catmatfinder).

<a href="http://ssrn.com/abstract=2412328">Ideological bias in democracy measures</a> Here I use Monte Carlos to reassess some studies on the biases behind the Freedom House, Polity IV, etc. I find that the evidence of bias is robust but that we can't know which measures are biased or in what direction (e.g., for all we know the Freedom House may as well have a leftist bias, contrary to popular belief). <u>Data and code</u>. I used a mix of Stata (<a href="https://gist.github.com/thiagomarzagao/e49541433d474d11d1fb">here</a> and <a href="https://gist.github.com/thiagomarzagao/18fed6a8afbb484e0c9c">here</a>) and R (<a href="https://gist.github.com/thiagomarzagao/c916e2a3ce77ea23d9a8">here</a>) code. <a href="http://s3.amazonaws.com/thiagomarzagao/data-bollenpaxton.dta">Here's</a> the data in Stata format and <a href="https://s3.amazonaws.com/thiagomarzagao/bollenpaxtondata.csv">here's</a> the same data in CSV format (for the R code).

<a href="http://arxiv.org/abs/1502.06161">Automated Democracy Scores</a> In this paper I use natural language processing to create the first machine-coded democracy index, which I call Automated Democracy Scores (ADS). I base the ADS on 42 million news articles from 6,043 different sources. The ADS cover all independent countries in the 1993-2012 period. Unlike the democracy indices we have today the ADS are replicable and have standard errors small enough to actually distinguish between cases.
To produce the ADS I relied on supervised learning. I tried three different approaches, compared the results, and picked the approach that worked best. More specifically, I tried: a) a combination of Latent Semantic Analysis and tree-based regression methods; b) a combination of Latent Dirichlet Allocation and tree-based regression methods; and c) the Wordscores algorithm. The Wordscores algorithm outperformed the alternatives. I created a <a href="http://democracy-scores.org">web application</a> where anyone can tweak the training data and see how the results change (no coding required). <u>Data and code</u>. The two corpora (A and B) are available in <a href="http://math.nist.gov/MatrixMarket/formats.html#MMformat">MatrixMarket format</a>. Each corpus is accompanied by other files: an internal index; a Python pickle with a dictionary mapping word IDs to words; and a Python pickle with a dictionary mapping words to word IDs. Here are the links: <a href="https://s3.amazonaws.com/thiagomarzagao/corpora_a/corpora_a.mm">Corpus A</a> (<a href="https://s3.amazonaws.com/thiagomarzagao/corpora_a/corpora_a.mm.index">index</a>, <a href="https://s3.amazonaws.com/thiagomarzagao/corpora_a/corpora_a_id2token">id2token</a>, <a href="https://s3.amazonaws.com/thiagomarzagao/corpora_a/corpora_a_token2id">token2id</a>) and <a href="https://s3.amazonaws.com/thiagomarzagao/corpora_b/corpora_b.mm">Corpus B</a> (<a href="https://s3.amazonaws.com/thiagomarzagao/corpora_b/corpora_b.mm.index">index</a>, <a href="https://s3.amazonaws.com/thiagomarzagao/corpora_b/corpora_b_id2token">id2token</a>, <a href="https://s3.amazonaws.com/thiagomarzagao/corpora_b/corpora_b_token2id">token2id</a>). There is also a cleaned-up version of the UDS dataset - <a href="https://s3.amazonaws.com/thiagomarzagao/uds.csv">here</a>. As for the code, I used Python 2.7.6. For LSA and LDA I used the package gensim (v. 0.8.9) and for the tree methods I used the package scikit-learn (v. 0.14.1). All the LSA/LDA/trees scripts are available online (change the "num_topics", "ipath", "opath", and "udsfile" variables as needed): <a href="https://gist.github.com/thiagomarzagao/1b7ecc3335f758fdf713">LSA</a>, <a href="https://gist.github.com/thiagomarzagao/459ebc07a0abe32407bd">LDA</a>, <a href="https://gist.github.com/thiagomarzagao/22cb3f26a750c9c7c2d3">tree-based predictions</a>, and <a href="https://gist.github.com/thiagomarzagao/116a40aadf70e52e5596">list of country-years</a> (must be in the same folder as the LSA and LDA scripts). To run Wordscores I had to implement it in Python, as the existing implementations (in R and Stata) do not handle out-of-core data. The code is not pretty though, so if you want to replicate the Wordscores part it may be easier for you to write your own code. If you do want to use my code, first you'll need to convert the term-frequency matrix from sparse to dense format, split it twice (once row-wise into chunks of 106,241 rows each and once column-wise in chunks of 49 columns each), compute the relative frequencies, split the matrix of relative frequencies (column-wise in chunks of 49 columns each), save all the chunks in <a href="www.hdfgroup.org/HDF5/">HDF5</a> format, name the chunks in very specific ways (see code) and download a cleaned-up version of the UDS dataset from <a href="https://s3.amazonaws.com/thiagomarzagao/uds.csv">here</a>. If you're willing to endure all that then my code should work - you can find it <a href="https://gist.github.com/thiagomarzagao/406be950a4fb67af3bde">here</a>. 
Running LSA, LDA, and Wordscores required high-performance computers. To run LSA, LDA, and Wordscores on corpus A I used a cluster of memory-optimized servers from Amazon EC2. Each server was an 8-core Intel Xeon E5-2670 v2 (Ivy Bridge) CPU with 61GB of RAM. To run LSA and LDA on corpus B I used a cluster of nodes from the Ohio Supercomputer Center. Each node was a 12-core Intel Xeon x5650 CPU with 48GB of RAM. Most LSA and LDA specifications took about a day to run, but a few (especially LDA with 300 topics) took almost a week. Total computing time was 1,512 hours. The tree-based methods only took a few seconds for each batch and did not require high-performance computers.

**Why is democracy declining in Latin America?** Here I argue that Latin America’s “left turn” in the 2000s was accompanied by democratic erosion, as the new governments that came to power relied on constituencies that did not value democracy (which in turn reduced the electoral cost of suppressing press freedom, violating term limits, etc).

<strong>newspaper articles</strong>:

<a href="http://www.estadao.com.br/noticias/impresso,o-terceiro-fracasso-do-mercosul,675591,0.htm">O terceiro fracasso do Mercosul</a> ("The third failure of Mercosur"). O Estado de São Paulo, 2/5/2011. Here I discuss why Mercosur failed to lock in the trade liberalization of the 1990s.

<a href="http://www.imil.org.br/artigos/o-preco-de-aceitar-a-venezuela/">O preço de aceitar a Venezuela</a> ("The price of accepting Venezuela"). O Estado de São Paulo, 5/28/2009. Here I discuss the policy consequences of Venezuela's entry into Mercosur (a trade bloc comprising Brazil, Argentina, Paraguay, Uruguay, and Venezuela).